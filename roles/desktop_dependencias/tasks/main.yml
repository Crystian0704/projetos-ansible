---
# tasks file for desktop_dependencias
- name: Instala pacotes
  apt:
    name: "{{ item }}"
    state: latest
  become: yes

- name: adiciona chave gpg para repositório
  apt_key:
    url: "https://dl.google.com/linux/linux_signing_key.pub"
    state: present

- name: adiciona repositório do google chrome
  apt_repository:
    filename: "google-chrome"
    repo: deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main
    state: present

- name: instala chrome
  apt:
    name:
      - google-chrome-stable

- name: Instala VScode
  apt:
    deb: https://go.microsoft.com/fwlink/?LinkID=760868
    state: present
  become: yes

- name: Configura usuário sudo
  shell: "echo '{{ user }} ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers"



- name: Cria diretório .config/i3
  file:
    path: /home/{{ user }}/.config/i3
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: 0744

- name: Cria diretório .config/rofi
  file:
    path: /home/{{ user }}/.config/rofi
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: 0744

- name: Cria diretório .config/kitty
  file:
    path: /home/{{ user }}/.config/kitty
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: 0744

- name: Copia os tema para o rofi
  copy:
    src: rofi_theme
    dest: /home/{{ user }}/.config/rofi/arthur.rasi
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: 0744

- name: Copia configuração do i3
  copy:
    src: i3_config
    dest: /home/{{ user }}/.config/i3/config
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: 0744

- name: Copia configuração do kitty
  copy:
    src: kitty_conf
    dest: /home/{{ user }}/.config/kitty/kitty.conf
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: 0744

- name: Copia configuração do tmux
  copy:
    src: tmux_config
    dest: /home/{{ user }}/.tmux.conf
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: 0744

- name: Copia script passrofi para /usr/local/bin e da permissão de execução
  copy:
    src: passrofi
    dest: /usr/local/bin/passrofi
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: 0744
